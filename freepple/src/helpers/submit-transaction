import { Wallet, Client, Transaction, SubmittableTransaction } from 'xrpl';

export default async function submitTransaction({ client, tx }: { client: Client; tx: Transaction }) {
    try {
        // Create a wallet using the seed
        const seed = process.env.SEED;
        if (!seed) {
            throw new Error('SEED environment variable is not set');
        }
        
        const wallet = Wallet.fromSeed(seed);
        tx.Account = wallet.address;

        // Sign and submit the transaction
        const response = await client.submit(tx as SubmittableTransaction, { wallet });
        console.log(response);

        return response;
    } catch (error) {
        console.log(error);
        return null;
    }
}